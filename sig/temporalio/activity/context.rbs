module Temporalio
  class Activity
    class Context
      attr_reader info: Temporalio::Activity::Info

      def initialize: (Temporalio::Activity::Info info, ^(*untyped) -> void, ?shielded: bool) -> void
      def heartbeat: (*untyped details) -> void
      def shield: { -> untyped } -> untyped
      def cancelled?: -> bool
      def cancel: (String reason, ?by_request: bool) -> void

      private

      @shielded: bool
      @pending_cancellation: Exception?

      attr_reader thread: Thread
      attr_reader heartbeat_proc: ^(*untyped) -> void
      attr_reader mutex: Thread::Mutex
    end
  end
end
